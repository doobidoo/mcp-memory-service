# MCP Memory Service - Docker Environment Configuration Template
# 
# Usage:
#   1. Copy this file: cp env.template .env
#   2. Edit .env with your actual values
#   3. NEVER commit .env to git (it's in .gitignore)
#
# Quick Start:
#   docker compose up -d

# ==============================================================================
# Image Configuration
# ==============================================================================

# Use pre-built image (leave empty to build from source)
# Examples:
#   MEMORY_IMAGE=                                    # Build from source
#   MEMORY_IMAGE=mcp-memory-service:latest           # Local image
#   MEMORY_IMAGE=docker.io/youruser/mcp-memory:v1   # Docker Hub
MEMORY_IMAGE=

# ==============================================================================
# Core Settings
# ==============================================================================

# Operation mode: mcp (stdio) or http (API server)
MCP_MODE=http

# Logging level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Host port for HTTP mode (maps to container port 8000)
HTTP_PORT=8000

# ==============================================================================
# Storage Configuration
# ==============================================================================

# Storage backend: sqlite_vec, cloudflare, hybrid
MCP_MEMORY_STORAGE_BACKEND=sqlite_vec

# SQLite database path (inside container)
MCP_MEMORY_SQLITE_PATH=/app/data/sqlite_vec.db

# Backups directory (inside container)
MCP_MEMORY_BACKUPS_PATH=/app/data/backups

# ==============================================================================
# Embeddings Configuration
# ==============================================================================

# Use ONNX embeddings (CPU-only, lighter, recommended)
MCP_MEMORY_USE_ONNX=1

# Embedding model name
MCP_EMBEDDING_MODEL=all-MiniLM-L6-v2

# ==============================================================================
# HTTP/API Configuration
# ==============================================================================

MCP_HTTP_ENABLED=true
MCP_HTTP_PORT=8000
MCP_HTTP_HOST=0.0.0.0
MCP_CORS_ORIGINS=*
MCP_SSE_HEARTBEAT=30

# ==============================================================================
# Authentication - API Key (Recommended)
# ==============================================================================

# Generate: openssl rand -hex 32
MCP_API_KEY=your-secure-api-key-here

# ==============================================================================
# Authentication - OAuth 2.1 (Optional)
# ==============================================================================

MCP_OAUTH_ENABLED=false
MCP_OAUTH_ALLOW_CLIENT_REGISTRATION=false
MCP_OAUTH_ALLOW_AUTHORIZATION=false
MCP_OAUTH_ISSUER=http://localhost:8000
MCP_OAUTH_ACCESS_TOKEN_EXPIRE_MINUTES=60
MCP_OAUTH_AUTHORIZATION_CODE_EXPIRE_MINUTES=10

# RSA keys (see README.md for generation command)
MCP_OAUTH_PRIVATE_KEY=
MCP_OAUTH_PUBLIC_KEY=

# ==============================================================================
# HTTPS Configuration (Optional)
# ==============================================================================

MCP_HTTPS_ENABLED=false
MCP_HTTPS_PORT=8443

# ==============================================================================
# Cloudflare Backend (Optional - for cloudflare/hybrid backend)
# ==============================================================================

CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_D1_DATABASE_ID=
CLOUDFLARE_VECTORIZE_INDEX=
CLOUDFLARE_R2_BUCKET=

# ==============================================================================
# Hybrid Backend Configuration (Optional)
# ==============================================================================

MCP_HYBRID_SYNC_INTERVAL=300
MCP_HYBRID_BATCH_SIZE=50
MCP_HYBRID_SYNC_ON_STARTUP=true

# ==============================================================================
# Service Discovery (Optional)
# ==============================================================================

MCP_MDNS_ENABLED=true
MCP_MDNS_SERVICE_NAME=MCP-Memory-Service

# ==============================================================================
# Memory Configuration
# ==============================================================================

MCP_ASSOCIATIONS_ENABLED=true
MCP_ASSOCIATION_MIN_SIMILARITY=0.3
MCP_ASSOCIATION_MAX_SIMILARITY=0.7
MCP_ASSOCIATION_MAX_PAIRS=100
MCP_SIMILARITY_THRESHOLD=0.0

# ==============================================================================
# Debug and Development
# ==============================================================================

MCP_DEBUG=false

